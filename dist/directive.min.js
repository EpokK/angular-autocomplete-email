/*!
 * angular-directive-boilerplate
 * 
 * Version: 0.0.8 - 2015-03-27T13:50:09.212Z
 * License: MIT
 */
"use strict";angular.module("angular-autocomplete-email",[]).directive("autocompleteEmail",function(e){var n=/([.^\S]+@[.^\S]+\.[.^\S]+)/gi,a=9,l=13,i=8,t=function(e,n){var a;return a=e.length>0?e:n},u=function(e,n){var a;return a=e.length>0?e+" <"+n+">":n},o=function(e){return e.replace(/</g,"").replace(/>/g,"").replace(/"/g,"").replace(/'/g,"").replace(/,/g,"").trim()},c=function(e,a,l){var i=e.match(n);if(a=a||[],i)for(var c=e,m=0;m<i.length;m++)if(c){var r=o(i[m]),s=c.split(r),p=o(s[0]),f={value:u(p,r),label:t(p,r),edit:!1};0===m&&l>=0?a[l]=f:a.push(f),c=s[1]}return a};return{restrict:"EA",templateUrl:"../src/input.html",replace:!0,scope:!1,link:function(n,t){n.onSubmit=function(e){var a=n.emails.indexOf(e),l=angular.copy(e.newValue),i=c(l,n.emails,a);i.length?n.emails=i:n.onRemove(n.emails.indexOf(e)),n.createNewInput()},n.onBlur=function(e){n.onSubmit(e)},n.onEdit=function(e){e.edit=!0,e.newValue=angular.copy(e.value)},n.onRemove=function(e){n.emails.splice(e,1)},n.onMouseDown=function(e){n.onClick(e)},n.createNewInput=function(){n.emails.push({value:"",label:"",newValue:"",edit:!0})},n.onClick=function(e){e.target==t[0].firstElementChild&&n.emails[n.emails.length-1].value&&n.createNewInput(),n.focusLastInput()},n.onAddEmail=function(e){n.emails.push({value:e.value,label:e.label,edit:!1})},n.onClose=function(){},n.focusLastInput=function(){e(function(){angular.element(t).find("input")[0].focus()},200)},n.onKeyDown=function(e,t){switch(e.keyCode){case i:var u=t.newValue,o=n.emails;0===u.length&&o.length>0&&this.onRemove(o.length-2);break;case a:case l:e.preventDefault(),e.stopPropagation()}},n.onKeyUp=function(e,i){switch(e.keyCode){case l:case a:n.onSubmit(i)}}}}}),angular.module("angular-autocomplete-email").run(["$templateCache",function(e){e.put("input.html",'<div><div class="input-email" ng-mousedown="onMouseDown($event)"><span ng-repeat="email in emails"><span class="label-email" ng-attr-title="{{email.value}}" ng-dblclick="onEdit(email)" ng-if="!!!email.edit"><span>{{email.label}}</span> <a ng-click="onRemove($index)">x</a></span><form class="form-email" ng-submit="onSubmit(email)" ng-if="!!email.edit"><input class="edit-email" type="text" ng-model="email.newValue" ng-blur="onBlur(email)" ng-keydown="onKeyDown($event, email)" ng-keyup="onKeyUp($event, email)"></form></span></div><ul class="autocomplete-email"><li ng-repeat="email in autocomplete"><a href="" ng-click="onAddEmail(email)">{{email.value}}</a></li></ul></div>')}]);